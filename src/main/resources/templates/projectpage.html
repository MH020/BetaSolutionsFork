<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Project Page</title>
</head>
<body>

<h1>Project: <span th:text="${project.name}"></span></h1>

<!-- Tasks for just the project -->
<h2>Tasks for the Project:</h2>
<ul>
    <li th:each="task : ${tasksWithoutSubProject}">
        Task: <span th:text="${task.name}"></span>
        <form th:action="@{/project/task/delete(taskID=${task.getID()}, projectID=${project.getID()})}" method="post"
              onsubmit="return confirm('Are you sure you want to delete this task?');">
            <button type="submit">Delete Task</button>
        </form>
        <ul>
            <li th:if="${tasksAndSubTasks[task]?.isEmpty()}">No subtasks</li>
            <li th:each="subTask : ${tasksAndSubTasks[task]}">
                SubTask: <span th:text="${subTask.key.getName()}"></span>
                <form th:action="@{/project/subtask/delete(subTaskID=${subTask.key.getID()}, projectID=${project.getID()})}" method="post"
                      onsubmit="return confirm('Are you sure you want to delete this subtask?');">
                    <button type="submit">Delete SubTask</button>
                </form>
            </li>
        </ul>
    </li>
</ul>

<!-- Subprojects -->
<h2>Subprojects with Tasks:</h2>
<ul>
    <li th:each="entry : ${subProjects}">
        <h3>SubProject: <span th:text="${entry.key.name}"></span></h3>
        <form th:action="@{/project/subproject/delete(subprojectID=${entry.key.getID()}, projectID=${project.getID()})}" method="post"
              onsubmit="return confirm('Are you sure you want to delete this subproject?');">
            <button type="submit">Delete SubProject</button>
        </form>
        <ul>
            <li th:if="${entry.value?.isEmpty()}">No tasks for this subproject</li>
            <li th:each="task : ${entry.value}">
                Task: <span th:text="${task.getName()}"></span>
                <form th:action="@{/project/task/delete(taskID=${task.getID()}, projectID=${project.getID()})}" method="post"
                      onsubmit="return confirm('Are you sure you want to delete this task?');">
                    <button type="submit">Delete Task</button>
                </form>
                <ul>
                    <li th:if="${tasksAndSubTasks[task]?.isEmpty()}">No subtasks</li>
                    <li th:each="subTask : ${tasksAndSubTasks[task]}">
                        SubTask: <span th:text="${subTask.name}"></span>
                        <form th:action="@{/project/subtask/delete(subTaskID=${subTask.getID()}, projectID=${project.getID()})}" method="post"
                              onsubmit="return confirm('Are you sure you want to delete this subtask?');">
                            <button type="submit">Delete SubTask</button>
                        </form>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
</ul>

</body>
</html>
